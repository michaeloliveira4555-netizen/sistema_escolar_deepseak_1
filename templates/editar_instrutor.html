{% extends "base.html" %}

{% block title %}Editar Instrutor - {{ instrutor.user.username }}{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        <h2>Editar Perfil do Instrutor: {{ instrutor.user.username }}</h2>
        <form method="POST" action="{{ url_for('instrutor.editar_instrutor', instrutor_id=instrutor.id) }}">
            <div class="form-group">
                <label for="matricula">Matrícula:</label>
                <input type="text" id="matricula" name="matricula" value="{{ instrutor.matricula }}" required>
            </div>
            
            <div class="form-group">
                <label>Efetivo da Reserva Remunerada?</label>
                <div class="radio-group">
                    <label class="radio-label">
                        <input type="radio" name="is_rr" value="sim" {% if instrutor.is_rr %}checked{% endif %}> Sim
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="is_rr" value="nao" {% if not instrutor.is_rr %}checked{% endif %}> Não
                    </label>
                </div>
            </div>
            
            <div class="form-group">
                <label for="especializacao">Especialização:</label>
                <input type="text" id="especializacao" name="especializacao" value="{{ instrutor.especializacao }}">
            </div>
            <div class="form-group">
                <label for="formacao">Formação:</label>
                <input type="text" id="formacao" name="formacao" value="{{ instrutor.formacao }}">
            </div>
            <div class="form-group">
                <label for="telefone">Telefone:</label>
                <input type="text" id="telefone" name="telefone" value="{{ instrutor.telefone or '' }}" placeholder="(XX) XXXXX-XXXX">
            </div>

            <button type="submit" class="btn btn-primary">Atualizar Perfil</button>
            <a href="{{ url_for('instrutor.listar_instrutores') }}" class="btn btn-secondary mt-3">Cancelar</a>
        </form>
    </div>
</div>

<style>
.radio-group {
    display: flex;
    gap: 1.5rem;
    margin-top: 0.5rem;
}
.radio-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
}
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const telefoneInput = document.getElementById('telefone');
        if (telefoneInput) {
            telefoneInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 11) value = value.slice(0, 11);
                if (value.length > 10) {
                    value = value.replace(/^(\d{2})(\d{5})(\d{4}).*/, '($1) $2-$3');
                } else {
                    value = value.replace(/^(\d{2})(\d{4})(\d{0,4})/, '($1) $2-$3');
                }
                e.target.value = value;
            });
        }
    });
</script>
{% endblock %}