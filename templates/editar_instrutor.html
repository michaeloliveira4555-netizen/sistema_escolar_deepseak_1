{% extends "base.html" %}

{% block title %}Editar Instrutor - {{ instrutor.user.username }}{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        <h2>Editar Perfil do Instrutor: {{ instrutor.user.username }}</h2>
        <form method="POST" action="{{ url_for('instrutor.editar_instrutor', instrutor_id=instrutor.id) }}">
            {{ form.hidden_tag() }}
            <div class="form-group">
                {{ form.especializacao.label }}
                {{ form.especializacao(class="form-control") }}
            </div>
            <div class="form-group">
                {{ form.formacao.label }}
                {{ form.formacao(class="form-control") }}
            </div>
            <div class="form-group">
                {{ form.telefone.label }}
                {{ form.telefone(class="form-control", placeholder="(XX) XXXXX-XXXX") }}
            </div>
            <div class="form-group">
                {{ form.credor.label }}
                {{ form.credor(class="form-control", rows="3", placeholder="Informações de pagamento, ex: Banco, Agência, Conta, CPF/CNPJ") }}
            </div>

            {{ form.submit(class="btn btn-primary") }}
            <a href="{{ url_for('instrutor.listar_instrutores') }}" class="btn btn-secondary mt-3">Cancelar</a>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const telefoneInput = document.getElementById('telefone');
        if (telefoneInput) {
            telefoneInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 11) value = value.slice(0, 11);
                if (value.length > 10) {
                    value = value.replace(/^(\d{2})(\d{5})(\d{4}).*/, '($1) $2-$3');
                } else if (value.length > 6) {
                    value = value.replace(/^(\d{2})(\d{4})(\d{4}).*/, '($1) $2-$3');
                } else if (value.length > 2) {
                    value = value.replace(/^(\d{2})(\d{0,5})/, '($1) $2');
                } else if (value.length > 0) {
                    value = value.replace(/^(\d{0,2})/, '($1');
                }
                e.target.value = value;
            });
        }
    });
</script>
{% endblock %}