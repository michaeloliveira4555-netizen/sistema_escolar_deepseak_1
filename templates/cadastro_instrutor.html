{% extends "base.html" %}

{% block title %}Cadastro de Instrutor{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        <h2>Cadastrar Novo Instrutor</h2>
        <form method="POST" action="{{ url_for('instrutor.cadastro_instrutor_admin') }}">
            {{ form.hidden_tag() }}
            <div class="form-group">
                {{ form.nome_completo.label }}
                {{ form.nome_completo(class="form-control") }}
            </div>
            <div class="form-group">
                {{ form.matricula.label }}
                {{ form.matricula(class="form-control") }}
            </div>
            <div class="form-group">
                {{ form.email.label }}
                {{ form.email(class="form-control") }}
            </div>
            <div class="form-group">
                {{ form.password.label }}
                {{ form.password(class="form-control") }}
            </div>
            <div class="form-group">
                {{ form.password2.label }}
                {{ form.password2(class="form-control") }}
            </div>
            <hr class="my-4">
            <h3>Detalhes do Perfil do Instrutor</h3>
            <div class="form-group">
                {{ form.especializacao.label }}
                {{ form.especializacao(class="form-control") }}
            </div>
            <div class="form-group">
                {{ form.formacao.label }}
                {{ form.formacao(class="form-control") }}
            </div>
            <div class="form-group">
                {{ form.telefone.label }}
                {{ form.telefone(class="form-control", placeholder="(XX) XXXXX-XXXX") }}
            </div>

            {{ form.submit(class="btn btn-primary") }}
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const telefoneInput = document.getElementById('telefone');

        if (telefoneInput) {
            telefoneInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 11) value = value.slice(0, 11);

                if (value.length > 10) {
                    value = value.replace(/^(\d{2})(\d{5})(\d{4}).*/, '($1) $2-$3');
                } else if (value.length > 6) {
                    value = value.replace(/^(\d{2})(\d{4})(\d{4}).*/, '($1) $2-$3');
                } else if (value.length > 2) {
                    value = value.replace(/^(\d{2})(\d{0,5})/, '($1) $2');
                } else if (value.length > 0) {
                    value = value.replace(/^(\d{0,2})/, '($1');
                }
                e.target.value = value;
            });
        }
    });
</script>

{% endblock %}